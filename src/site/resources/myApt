#!/bin/sh
# This script is a shortcut to generate an apt file on invoking the myApt_yyyyMMdd.jar executable jar file expected in the ~/bin/ directory of the current user
# This script is configured to handle default values for 3 possible input arguments:
# $1: the filename of the apt file to generate. Default is "src/site/apt/yyyyMMdd_myApt.apt" (with the current date)
# $2: the title of the document (default: "yyyy-MM-dd myApt")
# $3: "svn" optional option to inject svn Id URL Date Author Revision rcs auto-completed keywords in the generated file (header and footer)

# user input as first parameter is the filename and path to generate 
FILENAME=$1

# user input as second parameter is the title of the document to generate
TITLE=$2

# eventual third option to inject rcs keywords in the apt
SCM=$3

# appends the "-Dscm=" with the eventual third user input (overwritten to an empty string if the third option is not given)
SCM_OPTION="-Dscm="$3

# current system date in the yyyy-MM-dd format (if no title is given) for the title
TODAY=$(date +"%Y-%m-%d")

# current system date in the yyyyMMdd format (if no filename is given) for the filename
TODAY_ATTACHED=$(date +"%Y%m%d")

# checks user input first parameter (filename), if empty, sets a default value
if [ -z "$FILENAME" ]
then
   FILENAME=$TODAY_ATTACHED"_myApt.apt"
fi

# checks user input second parameter (title), if empty, sets a default value
if [ -z "$TITLE" ]
then
   TITLE=$TODAY" myApt"
fi

# checks user input third parameter (svn), if empty, sets an empty string for the third parameter
if [ -z "$SCM" ]
then
   SCM_OPTION=""
fi

# invokes the myApt jar file (expected in the bin directory) with given parameters
java -jar ~/bin/myApt_20150512.jar -Dtarget=$FILENAME -Dtitle="$TITLE" $SCM_OPTION
